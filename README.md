# Chrome Extension Template

![eslint version](https://img.shields.io/badge/eslint-9.16.0-4B32C3?logo=eslint&logoColor=white)
![jest version](https://img.shields.io/badge/jest-29.7.0-C21325?logo=jest&logoColor=white)
![prettier version](https://img.shields.io/badge/prettier-3.4.1-F7B93E?logo=prettier&logoColor=white)
![typescript version](https://img.shields.io/badge/typescript-5.7.2-3178C6?logo=typescript&logoColor=white)
![webpack version](https://img.shields.io/badge/webpack-5.96.1-8DD6F9?logo=webpack&logoColor=white)

A modern Chrome extension template built with TypeScript, Jest, Webpack, and pre-configured with Prettier and ESLint for clean, maintainable code. This template includes two powerful scripts‚Äî`build.js` and `publish.js`‚Äîto streamline the development, building, and publishing process for Chrome extensions.

## üìã Table of Contents

- [Features](#-features)
- [Prerequisites](#-prerequisites)
- [Getting Started](#-getting-started)
- [Scripts](#-scripts)
- [Contributing](#-contributing)
- [License](#-license)

## ‚ú® Features

- **TypeScript**: Write type-safe JavaScript with modern ECMAScript features.
- **Jest**: Unit testing framework for reliable code quality.
- **Webpack**: Bundles your extension for production with optimized output.
- **Prettier & ESLint**: Enforces consistent code style and catches potential errors.
- **Build Script**: Automates manifest validation, version synchronization, Webpack bundling, and ZIP packaging.
- **Publish Script**: Simplifies uploading your extension to the Chrome Web Store using OAuth 2.0.

## üì¶ Prerequisites

- [Node.js](https://nodejs.org/) (v16 or higher recommended)
- [npm](https://www.npmjs.com/) (comes with Node.js)
- A Chrome Web Store Developer account (for publishing)

## üöÄ Getting Started

1. **Clone the Repository**

    ```bash
    git clone https://github.com/ganemedelabs/chrome-extension-template.git
    cd chrome-extension-template
    ```

2. **Install Dependencies**

    ```bash
    npm install
    ```

3. **Customize Your Extension**

    - Update `manifest.json` with your extension's details (e.g., `name`, `description`, `icons`).
    - Modify `src/` files to implement your extension's functionality.

4. **Configure Environment (for Publishing)**
    - Create a `.env` file in the root directory (see [Publish Script](#publish-script) for details).

## üìÑ Scripts

### Build Script (`build.js`)

The `build.js` script handles the production bundling and packaging of your Chrome extension.

#### Features

- Validates `manifest.json` for required fields (e.g., `manifest_version`, `name`, `version`).
- Synchronizes versions between `package.json` and `manifest.json`.
- Runs Webpack to bundle your code into the `dist/` directory.
- Creates a versioned ZIP file (e.g., `extension-name-1-0-0.zip`) for deployment if no warnings occur.

#### Usage

```bash
npm run build
# or
node build.js
```

#### Notes

- Errors (e.g., missing required manifest fields) stop the build.
- Warnings (e.g., missing `description` or `icons`) allow the build but prevent ZIP generation.
- Adds `manifest_version: 3` if missing and uses `package.json` name as a fallback.

### Publish Script (`publish.js`)

The `publish.js` script uploads a pre-built ZIP file to the Chrome Web Store using OAuth 2.0.

#### Features

- Verifies the existence of the ZIP file generated by `build.js`.
- Handles OAuth 2.0 authentication (fetches and stores a `REFRESH_TOKEN` if needed).
- Uploads the ZIP to the Chrome Web Store using your `EXTENSION_ID`.

#### Prerequisites

- A ZIP file from a prior `build.js` run.
- A `.env` file with:
    ```env
    CLIENT_ID=your_client_id
    CLIENT_SECRET=your_client_secret
    EXTENSION_ID=your_extension_id
    ```
- See [How to Obtain Credentials](#how-to-obtain-client_id-and-client_secret) for setup instructions.

#### Usage

```bash
npm run publish
# or
node publish.js
```

#### Notes

- The `EXTENSION_ID` is available after publishing your extension manually at least once.

#### How to Obtain `CLIENT_ID` and `CLIENT_SECRET`

1. Go to [Google Cloud Console](https://console.developers.google.com/apis/credentials) and create a project (e.g., `chrome-webstore-item`).
2. Set up the OAuth consent screen (select "External," add your email as a test user).
3. Enable the [Chrome Web Store API](https://console.developers.google.com/apis/library/chromewebstore.googleapis.com).
4. Create an OAuth client ID (select "Desktop app," name it e.g., `Chrome Webstore Item`).
5. Save the generated `CLIENT_ID` and `CLIENT_SECRET` to your `.env` file.

## ü§ù Contributing

Feel free to submit issues or pull requests to improve this template!

## üìú License

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.
